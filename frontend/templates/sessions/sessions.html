{{ define "page" }}
  <div class="container mt-2">

    <div class="card mt-2">
      <div class="card-body px-0 py-3">
        <h2 class="px-2">Clients</h2>
        <div class="table-responsive px-0 py-1">
          <table class="table table-nobr" id="clients">
            <thead>
              <tr>
                <th>#</th>
                <th>Key</th>
                <th>First Seen</th>
                <th>Last Seen</th>
                <th>Requests</th>
                <th>Tokens</th>
                <th>Target</th>
                <th>Validator Count</th>
                <th></th>
              </tr>
            </thead>
              <tbody>
                {{ range $i, $session := .Sessions }}
                  <tr>
                    <td>{{ $session.Index }}</td>
                    <td>{{ $session.Key }}</td>
                    <td>{{ $session.FirstSeen }}</td>
                    <td>{{ $session.LastSeen }}</td>
                    <td>{{ $session.Requests }}</td>
                    <td>{{ $session.Tokens }}</td>
                    <td>{{ $session.Target }}</td>
                    <td>{{ $session.ValidatorCount }}</td>
                    <td>
                      {{ if gt (len $session.ValidatorStats) 0 }}
                        <button class="btn btn-sm btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#stats{{ $session.Index }}" aria-expanded="false">
                          Stats
                        </button>
                      {{ end }}
                    </td>
                  </tr>
                  {{ if gt (len $session.ValidatorStats) 0 }}
                    <tr>
                      <td colspan="9" class="p-0">
                        <div class="collapse" id="stats{{ $session.Index }}">
                          <table class="table mb-0">
                            <thead>
                              <tr>
                                <th>Start</th>
                                <th>Length</th>
                                <th>Flag</th>
                              </tr>
                            </thead>
                            <tbody>
                              {{ range $stat := $session.ValidatorStats }}
                                <tr>
                                  <td>{{ $stat.Start }}</td>
                                  <td>{{ $stat.Length }}</td>
                                  <td>{{ $stat.Flag }}</td>
                                </tr>
                              {{ end }}
                            </tbody>
                          </table>
                        </div>
                      </td>
                    </tr>
                  {{ end }}
                {{ end }}
              </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
{{ end }}

{{ define "js" }}
{{ end }}
{{ define "css" }}
{{ end }}